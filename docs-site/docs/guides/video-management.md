# Video Management

This guide covers how to work with videos, captions, summaries, and notes in TubeArchive.

## Listing Videos

### Get All Videos

```bash
curl -X GET "http://localhost:3000/api/v1/videos?page=1&limit=20" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### Filter by Playlist

```bash
curl -X GET "http://localhost:3000/api/v1/videos?playlistId=PLAYLIST_ID" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### Search Videos

```bash
curl -X GET "http://localhost:3000/api/v1/videos?search=typescript%20tutorial" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### Filter by Watch Status

```bash
# Get unwatched videos
curl -X GET "http://localhost:3000/api/v1/videos?status=unwatched" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"

# Get in-progress videos
curl -X GET "http://localhost:3000/api/v1/videos?status=in_progress" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"

# Get completed videos
curl -X GET "http://localhost:3000/api/v1/videos?status=completed" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

## Video Details

Get comprehensive video information:

```bash
curl -X GET http://localhost:3000/api/v1/videos/VIDEO_ID \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

Response includes:
- Title, description, duration
- Channel information
- View count and statistics
- Thumbnail URLs
- User watch progress
- Tags and categories

## Captions

### Get Available Languages

```bash
curl -X GET http://localhost:3000/api/v1/videos/VIDEO_ID/captions/languages \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

Response:
```json
{
  "languages": [
    { "code": "en", "name": "English", "isAutoGenerated": false },
    { "code": "ko", "name": "Korean", "isAutoGenerated": true }
  ]
}
```

### Get Captions

```bash
# Default language (English)
curl -X GET http://localhost:3000/api/v1/videos/VIDEO_ID/captions \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"

# Specific language
curl -X GET "http://localhost:3000/api/v1/videos/VIDEO_ID/captions?language=ko" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

Response:
```json
{
  "captions": [
    { "start": 0, "duration": 3.5, "text": "Welcome to this tutorial" },
    { "start": 3.5, "duration": 4.2, "text": "Today we'll learn about..." }
  ],
  "language": "en",
  "isAutoGenerated": false
}
```

## Video Summaries

### Generate a Summary

```bash
curl -X POST http://localhost:3000/api/v1/videos/VIDEO_ID/summary \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -d '{
    "level": "detailed",
    "language": "en"
  }'
```

### Summary Levels

| Level | Description | Approximate Length |
|-------|-------------|-------------------|
| `brief` | Key points only | 2-3 paragraphs |
| `detailed` | Comprehensive summary | 5-7 paragraphs |
| `comprehensive` | Full analysis | 10+ paragraphs |

### Get Existing Summary

```bash
curl -X GET http://localhost:3000/api/v1/videos/VIDEO_ID/summary \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

## Notes

### Create a Note

Add a timestamped note to a video:

```bash
curl -X POST http://localhost:3000/api/v1/videos/VIDEO_ID/notes \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -d '{
    "timestamp": 120,
    "content": "Important concept: dependency injection explained here",
    "tags": ["concept", "di", "important"]
  }'
```

### List Notes for a Video

```bash
curl -X GET http://localhost:3000/api/v1/videos/VIDEO_ID/notes \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### Filter Notes by Tags

```bash
curl -X GET "http://localhost:3000/api/v1/videos/VIDEO_ID/notes?tags=important,concept" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### Filter Notes by Timestamp Range

```bash
curl -X GET "http://localhost:3000/api/v1/videos/VIDEO_ID/notes?startTime=60&endTime=300" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### Update a Note

```bash
curl -X PATCH http://localhost:3000/api/v1/notes/NOTE_ID \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -d '{
    "content": "Updated note content",
    "tags": ["updated", "important"]
  }'
```

### Delete a Note

```bash
curl -X DELETE http://localhost:3000/api/v1/notes/NOTE_ID \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

## Export Notes

Export your notes in various formats:

### Markdown Export

```bash
curl -X GET "http://localhost:3000/api/v1/notes/export?format=markdown&videoId=VIDEO_ID" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### JSON Export

```bash
curl -X GET "http://localhost:3000/api/v1/notes/export?format=json" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### CSV Export

```bash
curl -X GET "http://localhost:3000/api/v1/notes/export?format=csv&tags=important" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

## Watch Sessions

Record your watch progress:

```bash
curl -X POST http://localhost:3000/api/v1/analytics/sessions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -d '{
    "videoId": "VIDEO_ID",
    "startPosition": 0,
    "endPosition": 300,
    "startTime": "2025-12-19T10:00:00Z",
    "endTime": "2025-12-19T10:05:00Z"
  }'
```

## Best Practices

### Note-Taking Tips

1. **Use timestamps**: Makes notes navigable
2. **Add tags**: Enables filtering and organization
3. **Be concise**: Focus on key insights
4. **Export regularly**: Backup your knowledge

### Video Organization

1. **Use playlists**: Group related videos
2. **Track completion**: Mark videos as completed
3. **Review summaries**: Quick refresher before revisiting
4. **Archive old content**: Keep database manageable

## Next Steps

- [Learning Analytics](/docs/guides/learning-analytics) - Track your progress
- [Playlist Sync](/docs/guides/playlist-sync) - Manage playlists
- [API Reference](/docs/api-reference/tubearchive-api) - All endpoints
